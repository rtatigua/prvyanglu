<div class="clans-container">
  <div class="header-section">
    <h1>ğŸ° Clans</h1>
    <p class="subtitle">Manage and organize your gaming clans</p>
  </div>

  <app-search [(searchQuery)]="searchTerm"></app-search>

  <button class="btn-add" (click)="addClan()">
    <span class="icon">â•</span> Add New Clan
  </button>

  <div class="clans-grid">
    @if (clans().length) {
      @for (c of clans(); track c.id) {
        <div class="clan-card" (click)="openDetail(c.id)">
          <div class="card-header">
            <h3>{{ c.name }}</h3>
            <span class="capacity-badge">{{ (c.members?.length ?? 0) }}/{{ c.capacity }}</span>
          </div>
          <p class="description">{{ c.description }}</p>
          <div class="card-footer">
            <div class="members-info">
              <span class="members-count">{{ (c.members?.length ?? 0) }} members</span>
            </div>
            <button 
              class="btn-remove" 
              (click)="removeClan(c.id); $event.stopPropagation()"
              title="Delete this clan">
              âŒ
            </button>
          </div>
        </div>
      }
    } @else {
      <div class="empty-state">
        <p>ğŸœï¸ No clans yet. Create your first one!</p>
      </div>
    }
  </div>

  @if (showForm()) {
    <div class="new-clan-form">
      <form (submit)="createClan(); $event.preventDefault()">
        <div>
          <label for="name">Clan Name</label>
          <input id="name" [value]="name()" (input)="name.set($any($event.target).value)" />
        </div>
        <div>
          <label for="description">Description</label>
          <textarea id="description" [value]="description()" (input)="description.set($any($event.target).value)"></textarea>
        </div>
        <div>
          <label for="capacity">Capacity</label>
          <input id="capacity" [value]="capacity()" (input)="capacity.set(+$any($event.target).value)" type="number" inputmode="numeric" pattern="\\d*" min="1" step="1" />
        </div>
        <div class="form-actions">
          <button type="submit" class="btn-add" [disabled]="!formValid()">Create</button>
          <button type="button" (click)="showForm.set(false)">Cancel</button>
        </div>
      </form>
    </div>
  }
</div>
